<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Stock Viewer</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <style>
    .chart { margin-bottom: 24px; }
  </style>
</head>
<body class="container py-4">
  <h1 class="mb-3">銘柄ビューア</h1>

  <form method="POST" class="row g-2 mb-4">
    <div class="col-auto">
      <input class="form-control" type="text" name="symbol" placeholder="例: AAPL" value="{{ symbol or '' }}" required>
    </div>
    <div class="col-auto form-check align-self-center">
      <input class="form-check-input" type="checkbox" name="show_raw_data" value="true" id="raw" {% if show_raw_data %}checked{% endif %}>
      <label class="form-check-label" for="raw">生の財務データを表示</label>
    </div>
    <div class="col-auto">
      <button class="btn btn-primary" type="submit">表示</button>
    </div>
  </form>

  {% if plot %}
    <h2 class="h5">チャート</h2>
    <div class="chart">{{ chart_html|safe }}</div>
    <div class="chart">{{ chart_html2|safe }}</div>
    <div class="chart">{{ chart_html3|safe }}</div>
    <div class="chart">{{ linechart_html3|safe }}</div>

    <h2 class="h5 mt-4">価格データ</h2>
    <div class="table-responsive">{{ table_html|safe }}</div>

    <h2 class="h5 mt-4">財務データ（整形）</h2>
    <div class="table-responsive">{{ financial_html|safe }}</div>

    {% if show_raw_data %}
      <h2 class="h5 mt-4">財務データ（生）</h2>
      <div class="table-responsive">{{ financial_data_raw_html|safe }}</div>
    {% endif %}
  {% else %}
    <p>上のフォームにティッカー（例: AAPL, MSFT, TSLA）を入力して送信してください。</p>
  {% endif %}
</body>
</html>